<!DOCTYPE html>
<html style="height: 100%;">

<head>
    <meta charset="utf-8" />
    <title>Simple Snake like Game</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        canvas {
            background: #eee;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>

<body style="display: flex; justify-content: center; align-items: center; height: 100%;">

    <canvas id="myCanvas" width="480" height="320"></canvas>

    <script>
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");
        var size = 20;

        var maxX = 480 / size - 1;
        var maxY = 320 / size - 1;
        var minX = 0;
        var minY = 0;

        var schlangeX = maxX / 2;
        var schlangeY = maxY / 2;


        var rightPressed = false;
        var leftPressed = false;
        var upPressed = false;
        var downPressed = false;

        var richtung = 0; //0 = rechts, 1 = links, 2 = oben, 3 = unten

        var timer = 0;
        var speed = 10;

        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keyup", keyUpHandler, false);

        //Taste gedrückt
        function keyDownHandler(e) {
            if (e.code == "ArrowRight") {
                rightPressed = true;
            }
            else if (e.code == 'ArrowLeft') {
                leftPressed = true;
            }
            else if (e.code == 'ArrowUp') {
                upPressed = true;
            }
            else if (e.code == 'ArrowDown') {
                downPressed = true;
            }
        }
        //Taste losgelassen
        function keyUpHandler(e) {
            if (e.code == 'ArrowRight') {
                rightPressed = false;
            }
            else if (e.code == 'ArrowLeft') {
                leftPressed = false;
            }
            else if (e.code == 'ArrowUp') {
                upPressed = false;
            }
            else if (e.code == 'ArrowDown') {
                downPressed = false;
            }
        }

        //Zeichnen der Schlange
        function drawSnake() {
            ctx.beginPath();
            ctx.rect(schlangeX * size, schlangeY * size, size, size);;
            ctx.fillStyle = "#109DDD";
            ctx.fill();
            ctx.closePath();
        }

         //Zeichnen der Frucht
         function drawFruit() {
            ctx.beginPath();
            ctx.rect(schlangeX * size, schlangeY * size, size, size);;
            ctx.fillStyle = "#109DDD";
            ctx.fill();
            ctx.closePath();
        }

        //Alles zeichen
        function draw() {
            //Löschen der Zeichnfläche
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawSnake();

            timer = timer + 1;
            if (timer > speed) {
                timer = 0;
            }

            if (richtung == 0 && timer == 0) {
                schlangeX = schlangeX + 1
            }
            else if (richtung == 1 && timer == 0) {
                schlangeX = schlangeX - 1
            }
            else if (richtung == 2 && timer == 0) {
                schlangeY = schlangeY - 1
            }
            else if (richtung == 3 && timer == 0) {
                schlangeY = schlangeY + 1
            }


            // Grenzüberwachung
            if (schlangeX > maxX) {
                schlangeX = maxX;
            }
            if (schlangeX < minX) {
                schlangeX = minX;
            }
            if (schlangeY > maxY) {
                schlangeY = maxY;
            }
            if (schlangeY < minY) {
                schlangeY = minY;
            }


            if (rightPressed && richtung != 1) {
                richtung = 0;
            }
            else if (leftPressed && richtung != 0) {
                richtung = 1;
            }
            else if (upPressed && richtung != 3) {
                richtung = 2;
            }
            else if (downPressed && richtung != 2) {
                richtung = 3;
            }

            //Immer wieder alles Zeichnen -> 60fps, d.h. draw wird alle 16ms aufgerufen.
            requestAnimationFrame(draw);
        }

        //Zeichnen erstmalig aufrufen
        draw();




    </script>

</body>

</html>